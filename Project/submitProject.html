<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Request Form</title>
    <link rel="stylesheet" href="submitProject.css">
</head>
<body>

    <!-- <header class="main-header">
        <a class="logoSection" href="../index.html">
            <img src="../assets/images/npc-site-logo.png">
        </a>
        <div class="userDataSection">
            <div class="userImgContainer">
                <img class="userImg" src="../assets/images/1697195973305.jpg">
            </div>
            <div class="sittingsMenu">
                <i class="bi bi-gear-wide-connected"></i>
            </div>
            <div class="sittingsMenu">
                <i class="bi bi-translate"></i>
            </div>
        </div>
    </header> -->

    <div class="container">
        <!-- <div class="lang-switch">
            <button onclick="switchLanguage('en')">English</button>
            <button onclick="switchLanguage('ar')">العربية</button>
        </div> -->
        <h1 id="formTitle">Create Project</h1>
        <form id="dataRequestForm">
            <section>
                <h2 id="ProjectInfoTitle">Project Information</h2>

                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="Name" id="NameLabel">Name</label>
                        <input type="text" id="Name" name="Name" required>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="EnglishName" id="EnglishNameLabel">English Name</label>
                        <input type="text" id="EnglishName" name="EnglishName" required>
                    </div>
                </div>

                <div class="flex-500">
                    <div class="form-group  width-50">
                        <label for="ConfidentialProjectType" id="ConfidentialProjectTypeLabel">Confidential Project</label>
                        <select id="ConfidentialProjectType" name="ConfidentialProjectType" required>
                            <option value="0">اختر...</option>
                            <option value="0">لا</option>
                            <option value="1">نعم</option>
                        </select>
                    </div>
    
                    <div class="form-group  width-50">
                        <label for="Priority" id="PriorityLabel">Priority</label>
                        <select id="Priority" name="Priority" required>
                            <option value="0">اختر...</option>
                            <option value="876500000">منخفض</option>
                            <option value="876500001">عادي</option>
                            <option value="876500002">مرتفع</option>
                        </select>
                    </div>
                </div>

                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="Description" id="DescriptionLabel">Description</label>
                        <textarea id="Description" name="Description" rows="5" required></textarea>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="EnglishDescription" id="EnglishDescriptionLabel">English Description</label>
                        <textarea id="EnglishDescription" name="EnglishDescription" rows="5" required></textarea>
                    </div>
                </div>


                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="ProjectType" id="ProjectTypeLabel">Project Type</label>
                        <select id="ProjectType" name="ProjectType" required>
                            <option value="0">اختر...</option>
                            <option value="876500000">تشغيل</option>
                            <option value="876500002">تنفيذ</option>
                        </select>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="Agency" id="AgencyLabel">Agency</label>
                        <select id="Agency" name="Agency" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
                </div>

                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="ProjectManager" id="ProjectManagerLabel">Project Manager</label>
                        <select id="ProjectManager" name="ProjectManager" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="ProjectOwner" id="ProjectOwnerLabel">Project Owner</label>
                        <select id="ProjectOwner" name="ProjectOwner" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
                </div>

                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="ProjectSponsor" id="ProjectSponsorLabel">Project Sponsor</label>
                        <select id="ProjectSponsor" name="ProjectSponsor" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="Sector" id="SectorLabel">Sector</label>
                        <select id="Sector" name="Sector" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
                </div>

                <div class="flex-500">
                    <div class="form-group width-50">
                        <label for="Program" id="ProgramLabel">Program</label>
                        <select id="Program" name="Program" required>
                            <option value="0">اختر...</option>
                        </select>
                    </div>
    
                    <div class="form-group width-50">
                        <label for="Budget" id="BudgetLabel">Budget</label>
                        <input type="text" id="Budget" name="Budget" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="Expected" id="ExpectedLabel" style="margin-bottom: 15px;">Expected</label>

                    <div>
                        <div class="form-group width-45-first">
                            <label for="EstimatedStartDate" id="EstimatedStartDateLabel">Estimated Start Date</label>
                            <input type="date" id="EstimatedStartDate" name="EstimatedStartDate" required>
                        </div>
    
                        <div class="form-group width-45">
                            <label for="FinishDate" id="FinishDateLabel">Finish Date</label>
                            <input type="date" id="FinishDate" name="FinishDate" required>
                        </div>
                    </div>

                </div>


            </section>


            <!-- <section>
                <h2 id="requestDetailsTitle">Data Sharing Request Details</h2>


                <div class="form-group width-45-request">
                    <label for="dataOwner" id="dataOwnerLabel">Data Owner Name</label>
                    <select id="dataOwner" name="DataOwner" required>
                        <option value="0">Select...</option>
                    </select>
                </div>
                <div class="form-group" style="margin-left: 11px;">
                    <label for="requestedDataDescription" id="dataDescLabel">Please describe, as precisely as possible, the information you are requesting </label>
                    <textarea id="requestedDataDescription" name="RequestedDataDescription" required></textarea>
                </div>
                <div class="form-group" style="margin-left: 11px;">
                    <label for="reasonForRequest" id="reasonLabel">Clearly state the reason of the request for sharing data</label>
                    <textarea id="reasonForRequest" name="ReasonForRequest" required></textarea>
                </div>
                <div class="form-group">
                    <label for="dataClassification" id="dataClassLabel">State the Classification of the Data: (Public for general data, Confidential if data contains personal data)</label>
                    <select id="dataClassification" name="DataClassification" required style="width: 98.4%;">
                        <option value="1">عام</option>
                        <option value="2">مقيد</option>
                        <option value="3">سري</option>
                        <option value="4">سري للغاية</option>
                      </select>
                </div>
                <div class="form-group"  style="width: 98.4%;">
                    <label for="frequency" id="freqLabel">Frequency of Data Sharing</label>
                    <input type="number" id="frequency" name="Frequency" required>
                </div>

            </section> -->

            <button type="button" id="submitLabel" class="submit-button" onclick="submitForm()">Submit</button>
        </form>
    </div>

    <script>
        function switchLanguage(lang) {
            const translations = {
                en: {
                    formTitle: "Create Project",
                    ProjectInfoTitle: "Project Information",
                    NameLabel: "Name",
                    EnglishNameLabel: "English Name",
                    ConfidentialProjectTypeLabel: "Confidential Project",
                    PriorityLabel: "Priority",
                    DescriptionLabel: "Description",
                    EnglishDescriptionLabel: "English Description",
                    ProjectTypeLabel: "Project Type",
                    AgencyLabel: "Agency",
                    ProjectManagerLabel: "Project Manager",
                    ProjectOwnerLabel: "Project Owner",
                    ProjectSponsorLabel: "Project Sponsor",
                    SectorLabel: "Sector",
                    ProgramLabel: "Program",
                    ExpectedLabel: "Expected",
                    EstimatedStartDateLabel: "Estimated Start Date",
                    FinishDateLabel: "Finish Date",
                    BudgetLabel: "Budget",

                    submitLabel: "Submit",
                },
                ar: {
                    formTitle: "طلب مشروع جديد",
                    ProjectInfoTitle: "معلومات المشروع",
                    NameLabel: "الاسم",
                    EnglishNameLabel: "الاسم بالإنجليزية",
                    ConfidentialProjectTypeLabel: "مشروع سري",
                    PriorityLabel: "الأولوية",
                    DescriptionLabel: "الوصف",
                    EnglishDescriptionLabel: "الوصف بالإنجليزية",
                    ProjectTypeLabel: "نوع المشروع",
                    AgencyLabel: "الوكالة",
                    ProjectManagerLabel: "مدير المشروع",
                    ProjectOwnerLabel: "مالك المشروع",
                    ProjectSponsorLabel: "راعي المشروع",
                    SectorLabel: "قسم",
                    ProgramLabel: "برنامج",
                    ExpectedLabel: "المتوقع",
                    EstimatedStartDateLabel: "تاريخ البدء المتوقع",
                    FinishDateLabel: "تاريخ الانتهاء",
                    BudgetLabel: "الميزانية",

                    submitLabel: "تقديم",
                }
            };

            const elements = translations[lang];
            for (const id in elements) {
                document.getElementById(id).textContent = elements[id];
            }

            const html = document.documentElement;
            html.lang = lang;
            html.dir = lang == 'en'? 'ltr': 'rtl';
        }

        switchLanguage('ar');

        (getPrograms = async () => {
            const response = await fetch('https://prod-07.westeurope.logic.azure.com:443/workflows/cca08c1418b14231aa8afb33097b3a2f/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=gkAX_Ovaw37cxzMopCUjebzf--Ardj2Fbjqjj18swys',
             {        method: 'POST',
                        headers: {
                        'Content-Type': 'application/json'
                    }
            }
        );  
            const Programs = await response.json();
            const ProgramsSelect = document.getElementById('Program');
            Programs.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                ProgramsSelect.appendChild(option);
            });
            console.log("Programs", Programs);
        })();

        (getAgencies = async () => {
            const response = await fetch('https://prod-96.westeurope.logic.azure.com:443/workflows/aef7ee9745a4401aa0a067675255caec/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=-pt_g-q_OQtcyEEM9w64XKS2sq2s0_3-jh51bqZdT5c',
             {        method: 'POST',
                        headers: {
                        'Content-Type': 'application/json'
                    }
            }
        );  
            const Agencies = await response.json();
            const AgenciesSelect = document.getElementById('Agency');
            Agencies.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                AgenciesSelect.appendChild(option);
            });
            console.log("Agencies", Agencies);
        })();

        (getSectors = async () => {
            const response = await fetch('https://prod-46.westeurope.logic.azure.com:443/workflows/e4b1286a88c94268a84c6f1e00a1533d/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=Gt0zgYM51AfnZtkXjbFnr49xlvC0Vcbjj4tbQ4d__fQ',
             {        method: 'POST',
                        headers: {
                        'Content-Type': 'application/json'
                    }
            }
        );  
            const Sectors = await response.json();
            const SectorsSelect = document.getElementById('Sector');
            Sectors.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                SectorsSelect.appendChild(option);
            });
            console.log("Sectors", Sectors);
        })();


        (getOwnersNames = async () => {
            const response = await fetch('https://prod-214.westeurope.logic.azure.com:443/workflows/169d17fff72a41888a48dcbe09e0a76d/triggers/manual/paths/invoke?api-version=2016-06-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=_iNAqgevO91xpqDvB-Pkw_jDZ-DFbG_rDFUfVjmXsEc',
             {        method: 'POST',     
                        headers: {
                        'Content-Type': 'application/json'
                    }
            }
        );  
            const OwnerNames = await response.json();

            // owners
            const ProjectOwnerSelect = document.getElementById('ProjectOwner');
            OwnerNames.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                ProjectOwnerSelect.appendChild(option);
            });

            // sponsers
            const ProjectSponsorSelect = document.getElementById('ProjectSponsor');
            OwnerNames.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                ProjectSponsorSelect.appendChild(option);
            });

            // managers
            const ProjectManagerSelect = document.getElementById('ProjectManager');
            OwnerNames.forEach(entityName => {
                const option = document.createElement('option');
                option.value = entityName.id;
                option.textContent = entityName.Name;
                ProjectManagerSelect.appendChild(option);
            });
            
            console.log("Owners", OwnerNames);
        })();

    </script>
    
    <script src="submitProject.js"></script>
</body>
</html>
